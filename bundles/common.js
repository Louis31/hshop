$(function(n){n.common={init:function(){this.base();this.product();this.cart();this.invite();this.bbs();this.user();this.tryEat();this.isShow_header();this.showReturnTop();this.setClass()},isShow_header:function(){n.common.checkUserAgent.isApp()&&(n(".topBar").hide(),n(".topMask").css("paddingTop","0px"))},setClass:function(){var t=function(t,i){i=document.createElement("style");i.innerText=t;n("body").append(i)};t("#noDataView{text-align: center;height: 95px;color: #b2b2b2;margin-bottom: 30px; line-height: 95px;}.bottomBtn{bottom: 30px;}.pf{left: 50%; transform: translateX(-50%);  -webkit-transform: translateX(-50%);}")},showReturnTop:function(){function i(){var n=0;return document.documentElement&&document.documentElement.scrollTop?n=document.documentElement.scrollTop:document.body&&(n=document.body.scrollTop),n}n(".bottomBtn a .iconTop").hide();var t=document.documentElement?document.documentElement.clientHeight:document.body.clientHeight;document.addEventListener("touchend",function(){i()>=t*2?n(".bottomBtn a .iconTop").fadeIn():n(".bottomBtn a .iconTop").fadeOut()})},checkUserAgent:function(){var n=function(){};return n.type=function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("saohuoapp")!=-1?n.indexOf("ios")!=-1?"ai":"aa":n.indexOf("micromessenger")!=-1?"wx":"wap"}(),n.isApp=function(){return n.type[0]=="a"?!0:!1},n.isAndroidApp=function(){return n.type=="aa"?!0:!1},n.isiOSApp=function(){return n.type=="ai"?!0:!1},n.isWX=function(){return n.type=="wx"?!0:!1},n}(),base:function(){n(function(){if(n(".wrapper").find(".topBar").length!=0)return null;n(".wrapper").css("paddingTop","0");n(".topMask").css("paddingTop","0")});n(".bottomBtn .topBtn").on("click",function(){return n("body,html").animate({scrollTop:0},200),setTimeout(function(){n(".bottomBtn a .iconTop").fadeOut()},210),!1});n(".closeDownload").on("click",function(){return n(this).parent().slideUp(),!1});n(".onFocus").focus();n(".realInput").on("input propertychange",function(){n(this).val().length>0?n(this).siblings(".clearText").show():n(this).siblings(".clearText").hide()});n(".clearText").on("click",function(){return n(".realInput").val("").focus(),n(this).hide(),!1});window.addEventListener("load",function(){FastClick.attach(document.body)},!1);n(".tabTitle a").click(function(){n(".tabContent").hide().eq(n(".tabTitle a").removeClass("active").index(n(this).addClass("active"))).show()}).eq(0).trigger("click");n(".close").on("click",function(){return n(".couponPopup").hide(),!1});n(window).load(function(){n(".loadMask").delay(400).fadeOut("slow")})},isWeiXin:function(){var n=window.navigator.userAgent.toLowerCase();return n.match(/MicroMessenger/i)=="micromessenger"?!0:!1},loading:function(){var i=Math.ceil(Math.random()*10);if(i>7){var t="",t=t+='<div class="loadMask">',t=t+='<div class="loading">',t=t+="<span><\/span>",t=t+="<span><\/span>",t=t+="<span><\/span>",t=t+="<span><\/span>",t=t+="<span><\/span>",t=t+="<\/div>",t=t+="<\/div>";n(".wrapper").prepend(t)}},addcartLoading:function(){var t="",t=t+='<div class="addcartLoading">',t=t+='<div class="load">',t=t+="<span><\/span>",t=t+="<span><\/span>",t=t+="<span><\/span>",t=t+="<span><\/span>",t=t+="<span><\/span>",t=t+="<\/div>",t=t+="<\/div>";n(".wrapper").prepend(t)},loadingHide:function(){n(".loadMask").delay(400).fadeOut("slow");n(".loadCircle").hide();n(".addcartLoading").hide();n(".loadBottom").hide()},loadCircle:function(){var t="",t=t+='<div class="loadCircle">',t=t+='<div class="loader">Loading...<\/div>',t=t+="<\/div>";n(".wrapper").prepend(t)},product:function(){n(".tryShare").on("click",function(){return n(".sharePopup").show(),!1})},cart:function(){n(".downloadPopup .close").on("click",function(){return n(".downloadPopup").hide(),!1});toastr.options={closeButton:!1,debug:!1,onclick:null,timeOut:"1500"}},invite:function(){n(".inviteRule").on("click",function(){return n(".invitePopup,.ruleBox").show(),!1});n(".inviteClose").on("click",function(){return n(".invitePopup,.ruleBox,.mobileBox").fadeOut("slow"),!1});n(".sharePopup").on("click",function(){return n(this).fadeOut("slow"),!1});n(".sharePopup img").on("click",function(n){return n.stopPropagation(),!1})},bbs:function(){n(".amount").on("input propertychange",function(){n(this).val().length>0?n(".bbcTixian a").addClass("true"):n(".bbcTixian a").removeClass("true")})},user:function(){n(".couponBox").on("click",".couponIcon",function(){return n(this).parent().siblings(".couponTips").show(),!1});n("body").on("click",function(){n(".couponTips").hide()})},countdown:function(t){var i=n(t).attr("data-time");n(t).downCount({date:i,offset:8},function(){n(t).html("已完成")});setTimeout(function(){n(t+" .days").html()==0&&(n(t+" .days").hide(),n(t+" .days").next().hide())},2e3)},tryEat:function(){n(".trySurvey .select select").change(function(){var t=n(this).children("option:selected").text();n(this).siblings("span").text(t).removeClass("gray")});n(".reportSubmit .textareaBox textarea").focus(function(){n(this).parent().removeClass("error")});n(".reportSubmit .item .tag span").on("click",function(){n(this).toggleClass("active")});n(".imgBox .img-list").on("click","a",function(){n(this).parent().remove()});n(".trySurvey .like li").on("click",function(){n(this).toggleClass("active");n.common.tryLike()})},tryLike:function(){var t=n(".trySurvey .like li.active").length;t>=3?n(".tryBar .ruleBtn a").removeClass("gray").text("下一步"):n(".tryBar .ruleBtn a").addClass("gray").text("请至少选择3项（"+t+"/3）")}};n.common.init()})